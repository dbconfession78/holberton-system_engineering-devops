#!/usr/bin/env bash
#manages manage_my_process

STATUS=$(pgrep -f ./manage_my_process)

start_proc() {
./manage_my_process &
pgrep -f ./manage_my_process > /var/run/my_process.pid
}

stop_proc() {
sudo pkill -f ./manage_my_process
}

if [ "$1" = "start" ]; then
    if [ "$STATUS" != "" ]; then
	echo "manage_my_process already running! PID:" "$STATUS"
	exit
    fi
    start_proc
    echo "manage_my_process started"
    exit
fi

if [ "$1" = "stop" ]; then
    if [ "$STATUS" = "" ]; then
	echo "manage_my_process already stopped!"
	exit
    fi
    stop_proc
    echo manage_my_process stopped
    exit
fi

if [ "$1" = "restart" ]; then
    if [ "$STATUS" = "" ]; then
	echo "manage_my_process not started!"
	exit
    fi
    stop_proc
    start_proc
    echo manage_my_process restarted
    exit
fi

echo "Usage: manage_your_process {start|stop|restart}"
